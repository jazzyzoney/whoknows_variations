# Overview

## The Docker setup

Since this branch (`continuous_delivery`) is focused on delivering the application to a container registry, only the prod versions of the Dockerfiles and Docker Compose files are important. But the both sets of files are included in the repository to show how you can specifiy the file when building the image and pushing it to the container registry.


The `src/backend/Dockerfile.prod` file installs the dependencies and runs the Flask server with Gunicorn which is recommended for production. 

The `src/docker-compose.prod.yml` file specifies the image to use and the port to expose.

## The Docker Compose setup

The `docker-compose.prod.yml` serves the Flask app. It differs from the dev version by: 

1. Not enabling hot reload

2. Creating an Nginx proxy server on port 80. 


## Running it locally

To run the application locally, cd to `src` where the `docker-compose.prod.yml` file is and run the following command:

```bash
$ docker-compose -f docker-compose.prod.yml up --build
```

You can now access it at `http://localhost:8080` or since there is also an Nginx server running, you can access it at `http://localhost:80`.

## The workflow file

There is a workflow file in `.github/workflows/continuous_delivery.yml` which builds the image and pushes it to the Github container registry. It will be explained later. 

