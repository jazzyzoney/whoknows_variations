# CLI Example

This step is not necessary and you can just set it up in a workflow. 

But it might give a better understanding of what the workflow does and it's great knowledge for debugging.

Please read it through before proceeding, because there some general information at the bottom. 

## Publish the packages through your terminal.

1. Create environment variables. 

Here is how to do it for *nix (replace with your own values):

```bash
$ export CR_PAT=<your_fine_grained_token>
$ export DOCKER_GITHUB_USERNAME=<your_github_username>
```

2. Login to Github Container Registry:

```bash
$ echo $CR_PAT | docker login ghcr.io -u $DOCKER_GITHUB_USERNAME --password-stdin
```
It should return `Login Succeeded`.

3. Build and push docker images. 

This example uses my own values. Replace with your own. 

Assuming that you are in `src`, this will build and push the server image:

```bash
$ docker-compose -f docker-compose.prod.yml build whoknows_flask
$ docker push ghcr.io/who-knows-inc/flask_variations_server:latest
```

And this will build and push our custom nginx image that has our [configuration](../src//network/nginx.conf) which points to whoknows_flask on port `8080`:

```bash
$ docker-compose -f docker-compose.prod.yml build whoknows_nginx
$ docker push ghcr.io/who-knows-inc/flask_variations_nginx:latest
```

## Check the images

This section relates to pushing images via a Github Action workflow. 

You will be able to find the packages in:

https://github.com/orgs/who-knows-inc/packages

If you have pushed your own images, then replace `who-knows-inc` with your own user / organisation name you published to.

### Publishing the images

The images are private by default. 

If you would like to publish the images first go to the organization page and click on the `Packages`: 

`https://github.com/organizations/<your_organisation_here>/settings/packages`

Under **Package creation** check the **Public** box.

Then go to the package under `https://github.com/orgs/who-knows-inc/packages`. Replace `who-knows-inc` with your own user / organisation name you published to.

On the right side, click `⚙️ Package settings`. Scroll down and in the Danger Zone there is a an option called: `Change package visibility`.