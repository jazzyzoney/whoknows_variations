## Flask - Prometheus setup

In `requirements.txt` in the `src/backend` folder, the following packages have been added:

```txt
prometheus-client==0.13.1
psutil==5.8.0
```

Psutil is a cross-platform library for retrieving information on running processes and system utilization (CPU, memory, disks, network, sensors) in Python.

In `app.py` in the `src/backend` folder, all new sections have been clearly commented. Just search for `prometheus`. 

For every request a counter is increased, CPU usage is measured. 

The file `src/prometheus.yml` is a config file for Prometheus. It has been clearly commented. 

## docker-compose.yml

The docker-compose.yml should be pretty straightforward. 

The services are in the same network `app-network`. There is also an order in which they depend on each other. 

Port `3000` for Grafana and `9090` for Prometheus are the default ports. 

## Try it out

```bash
$ docker-compose up --build
```

Now go to http://localhost:8080/metrics. You can try refreshing a couple of times and see some of the metrics change (CPU usage, request counter).

This is the URL that Prometheus requests. How often it does this is defined in `src/prometheus.yml`.